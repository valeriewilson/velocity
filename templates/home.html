{% extends 'base_logged_in.html' %}
{% block content %}

<div class="container" id="wrapper">
    <div class="row">
        <div class="col-xs-2 sidebar">

            <h3>Route Creator</h3>

            <!-- Displays route fields -->
            <div id="generator-options">
                <form action="/test-results" method="POST" id="route-form" novalidate>
                    <label for="start-address">Start address</label><br>
                    
                    <select name="address-options" id="address-dropdown">
                        {% if addresses %}
                            {% for address in addresses %}
                                <option class="address">{{ address[0] }}</option>
                            {% endfor %}
                        {% else %}
                            <option value="blank-address-option"></option>
                        {% endif %}
                        <option value="create-new-address" id="new-address">+ new address</option>
                    </select>
                    
                    <script src="https://code.jquery.com/jquery.js"></script><br>

                    <label for="route-type">Route type</label><br>
                    
                    <select name="route-type" id="route-type">
                        <option value="loop">Loop</option>
                        <option value="midpoint">Midpoint</option>
                    </select>
                    
                    <div class="hidden" id="midpoint-field">
                        <label for="midpoint-address">Midpoint address</label><br>
                        <input type="midpoint-address" id="midpoint-address" class="form-control" name="midpoint-address" autocomplete="off" placeholder="683 Sutter St">
                    </div>
                    
                    <div id="miles-field">
                        <label for="total-miles">How many miles?</label><br>
                        <input type="number" id="total-miles" name="total-miles" autocomplete="off" class="form-control" placeholder="10" required>
                    </div>
                    
                    <input type="submit" class="btn btn-primary" id="submit-button" value="Let's ride!">
                </form>
            </div>

            <!-- Displays new address fields, hidden by default -->
            <div id="new-address-information" class="hidden">
                <br><h3>New Address</h3>
                
                <form action="/new-address" method="POST" id="new-address-form">
                    <label for="label-field">Name</label>
                    <input type="label-field" id="label-field" class="form-control" name="label-field" autocomplete="off" placeholder="Hackbright">
                    
                    <label for="new-address-field">Address</label>
                    <input type="new-address-field" id="new-address-field" class="form-control" name="new-address-field" autocomplete="off" placeholder="683 Sutter St">

                    <label class="radio-label" for="radio">Default address</label>
                    <input type="radio" name="default-address" value="true" id="default-address">

                    <input type="submit" value="Save" id="save-button" class="btn btn-primary">
                </form>
            </div>

            <div id="results-dropdowns" class="hidden">
                <p><em>Ride Metrics</em></p>
                <ul>
                    <li id="ride-stats-miles"></li>
                    <li id="ride-stats-minutes"></li>
                    <li id="ride-stats-elevation"></li>
                </ul>
                
                <div>
                    <p>Save this route?</p>
                    
                    <div>
                        <label class="radio-label" for="radio">Yes</label>
                        <input type="radio" name="save-option" value="yes" id="yes-option">
                        <div id="star-rating" class="hidden">
                            <span class="glyphicon glyphicon-star" id="score-1" value="1"></span>
                            <span class="glyphicon glyphicon-star-empty" id="score-2" value="2"></span>
                            <span class="glyphicon glyphicon-star-empty" id="score-3" value="3"></span>
                            <span class="glyphicon glyphicon-star-empty" id="score-4" value="4"></span>
                            <span class="glyphicon glyphicon-star-empty" id="score-5" value="5"></span>
                        </div>
                    </div>

                    <div>
                        <label class="radio-label" for="radio">No</label>
                        <input type="radio" name="save-option" value="no" id="no-option"><br>
                        <form action="/reject-route" id="rejected-route-form" method="POST" class="hidden">
                            <select name="issue" id="issue">
                                <option id="impossible">Impossible route</option>
                                <option id="traffic">Major roads / traffic</option>
                                <option id="no-lanes">No bike lanes</option>
                                <option id="dont-like">Not feeling it</option>
                                <option id="overlapped">Overlapped sections</option>
                            </select>
                            <input type="submit" class="btn btn-primary" value="Save" id="save-reason">
                        </form>
                    </div>
                </div>

            </div>

            <div id="loading-image" class="hidden">
                <p>Retrieving results...</p>
                <img id="bike-gif" src="https://d13yacurqjgara.cloudfront.net/users/88825/screenshots/1134409/animated_bike-i1d1.gif">
            </div>
        </div>
        <div id="map" class="col-xs-offset-2 col-xs-9"></div>
    </div>

</div>

<script src="static/home.js"></script>

<script src="https://code.jquery.com/jquery.js" type="text/javascript"></script>

<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBlY0gdpn-82bFjwWdaAPdQ_oOtJwd9Y3s">
</script>

{% endblock %}