{% extends 'base.html' %}
{% block content %}

<div class="container row col-xs-4 left-hand-pane">

    <h2>Bike Route Generator</h2>

    <!-- Displays route fields -->
    <div id="generator-options">
        <form action="/test-results" method="POST" id="route-form" novalidate>
            <label for="start-address">Start address:</label>
            
            <select name="address-options" id="address-dropdown">
                {% if addresses %}
                    {% for address in addresses %}
                        <option class="address">{{ address[0] }}</option>
                    {% endfor %}
                {% else %}
                    <option value="blank-address-option"></option>
                {% endif %}
                <option value="create-new-address" id="new-address">+ new address</option>
            </select>
            
            <script src="https://code.jquery.com/jquery.js"></script><br>

            <label for="route-type">Route type:</label>
            
            <select name="route-type" id="route-type">
                <option value="loop">Loop</option>
                <option value="midpoint">Midpoint</option>
            </select>
            
            <div class="hidden" id="midpoint-field">
                <label for="midpoint-address">Midpoint address:</label>
                <input type="midpoint-address" id="midpoint-address" class="address" name="midpoint-address" autocomplete="off">
            </div>
            
            <div id="miles-field">
                <label for="total-miles">How many miles?</label>
                <input type="number" id="total-miles" name="total-miles" autocomplete="off" required>
            </div><br>
            
            <input type="submit" value="Let's ride!">
        </form>
    </div>

    <!-- Displays new address fields, hidden by default -->
    <div id="new-address-information" class="hidden">
        <h3>New address information</h3>
        
        <form action="/new-address" method="POST" id="new-address-form">
            <label for="label-field">Name:</label>
            <input type="label-field" id="label-field" name="label-field"><br>
            
            <label for="new-address-field">Address:</label>
            <input type="new-address-field" id="new-address-field" class="address" name="new-address-field"><br>

            <label for="radio">Default address?</label>
            <input type="radio" name="default-address" value="true" id="default-address"> Yes<br>

            <input type="submit" value="Save" id="save-button">
        </form>
    </div>

    <div id="results-dropdowns" class="hidden">
        <p id="ride-stats"></p>
        
        <div>
            <p>Do you want to save this route?</p>
            
            <div>
                <input type="radio" name="save-option" value="yes" id="yes-option"> Yes<br>
                <form action="/add-score" id="accepted-route-form" method="POST" class="hidden">
                    <select name="rating" id="rating">
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                    </select>
                    <input type="submit" value="Save" id="save-rating">
                </form>
            </div>

            <div>
                <input type="radio" name="save-option" value="no" id="no-option"> No<br>
                <form action="/reject-route" id="rejected-route-form" method="POST" class="hidden">
                    <select name="issue" id="issue">
                        <option id="impossible">Impossible route</option>
                        <option id="traffic">Major roads / traffic</option>
                        <option id="no-lanes">No bike lanes</option>
                        <option id="dont-like">Not feeling it</option>
                        <option id="overlapped">Overlapped sections</option>
                    </select>
                    <input type="submit" value="Save" id="save-reason">
                </form>
                <br>
            </div>
        </div>

    </div>

    <div id="loading-image" class="hidden">
        <p>Retrieving results...</p>
        <img id="bike-gif" src="https://d13yacurqjgara.cloudfront.net/users/88825/screenshots/1134409/animated_bike-i1d1.gif">
    </div>

</div>

<div id="map" class="container row col-xs-8"></div>

<script src="static/home.js"></script>

<script src="https://code.jquery.com/jquery.js" type="text/javascript"></script>

<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBlY0gdpn-82bFjwWdaAPdQ_oOtJwd9Y3s">
</script>

{% endblock %}